document.addEventListener("DOMContentLoaded",function(){function e(e,t){echarts.init(document.getElementById(e)).setOption(t)}function t(e){[i,l].forEach(t=>{t.innerHTML='<option value="">Select Team</option>',e.forEach(e=>{const n=document.createElement("option");n.value=e.abbrev,n.textContent=e.name,t.appendChild(n)})})}function n(e,t,n,a){c.style.display="block",r.innerHTML=`\n      <div class="card">\n        <div class="card-header">\n          <center><h5>${e} vs ${n}</h5></center>\n        </div>\n        <div class="card-body">\n          <table class="card-body">\n            <thead>\n              <tr>\n                <th>Category</th>\n                <th>${e}</th>\n                <th>${n}</th>\n              </tr>\n            </thead>\n            <tbody>\n              ${t.map((e,t)=>{const n=e.value,o=a[t].value||"N/A";return`\n                  <tr>\n                    <td>${e.category}</td>\n                    <td>${n}</td>\n                    <td>${o}</td>\n                  </tr>\n                `}).join("")}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    `}function a(e,t,n,a){const o=echarts.init(m),s={tooltip:{trigger:"axis"},legend:{data:[`${e} Points For`,`${e} Points Against`,"League Avg",`${n} Points For`,`${n} Points Against`]},grid:{top:"10%",bottom:"5%",left:"6%",right:"0%"},xAxis:{type:"category",data:t.xAxis.data},yAxis:{type:"value",name:"Points",nameLocation:"center",nameGap:35,nameTextStyle:{fontSize:16},axisLabel:{fontSize:14}},series:[{name:`${e} Points For`,type:"line",data:t.series[0].data,symbol:"circle",symbolSize:8,lineStyle:{width:3,color:"#FF6F61"}},{name:`${e} Points Against`,type:"line",data:t.series[1].data,symbol:"circle",symbolSize:8,lineStyle:{width:3,color:"#FFB84D"}},{name:"League Avg",type:"line",data:t.series[2].data,symbol:"none",lineStyle:{type:"dashed",width:2,color:"#888"}},{name:`${n} Points For`,type:"line",data:a.series[0].data,symbol:"circle",symbolSize:8,lineStyle:{width:3,color:"#3C8D40"}},{name:`${n} Points Against`,type:"line",data:a.series[1].data,symbol:"circle",symbolSize:8,lineStyle:{width:3,color:"#FFD700"}}]};o.setOption(s)}const o="/assets/json/team_data/",s=2024,i=document.getElementById("team1-select"),l=document.getElementById("team2-select"),d=document.getElementById("compare-btn"),c=document.getElementById("comparison-results"),r=(document.getElementById("team1-stats"),document.getElementById("team2-stats"),document.getElementById("comparison-table-div")),m=document.getElementById("chart-container");document.body.classList.contains("dark");fetch("/assets/json/team_data/team_abbrev_list_2024.json").then(e=>e.json()).then(e=>t(e))["catch"](e=>console.error("Failed to load teams:",e)),d.addEventListener("click",function(){const t=i.value,d=l.value;t&&d&&t!==d?Promise.all([fetch(`${o}${t}_${s}_summary.json`).then(e=>e.json()),fetch(`${o}${d}_${s}_summary.json`).then(e=>e.json()),fetch(`${o}${t}_${s}_weekly_scores.json`).then(e=>e.json()),fetch(`${o}${d}_${s}_weekly_scores.json`).then(e=>e.json()),fetch(`${o}${t}_${s}_pie.json`).then(e=>e.json()),fetch(`${o}${d}_${s}_pie.json`).then(e=>e.json())]).then(([o,s,i,l,c,r])=>{const m=o.name||t,y=s.name||d;n(m,o,y,s),a(m,i,y,l),e("team1-pie",c),e("team2-pie",r)})["catch"](e=>{console.error("Error fetching team data:",e),alert("Failed to load team data. Please try again.")}):alert("Please select two different teams.")})});